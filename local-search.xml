<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>一种精度高热电阻测温电路及算法设计</title>
    <link href="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/"/>
    <url>/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/</url>
    
    <content type="html"><![CDATA[<p>　　针对<strong>热电阻</strong>精度高测温过程中存在的导线内阻误差，及使用线性拟合出的阻值温度转换公式存在温度偏移问题，提出硬件使用专用采样芯片配合四线制热电阻接线方式完全消除导线内阻，软件采用二分查找及插值算法避免线性拟合带来的温度偏移的解决方案。在精度高温度测量领域具有较高实用性，能够大大提高温度测量精度。<br>　　温度是反应物理冷热程度的物理量，作为一种被控对象广泛应用于各个领域，无论是生物、医疗、科研及其制造生产行业中均需要精度高的温度测量，不同类型产品的生产制造以及各种科学研究实验对于工作环境温度测量精度要求越来越高，研究如何实现温度的精度高测量具有重大意义。从测量原理可以将温度测量分为接触式和非接触式两种,非接触式测温包括红外测温、紫外测温、激光测温及超声测温等，非接触式测温通过热辐射实现测温，不需要接触被测物体，通常用于测量高温物体，但是抗干扰能力差、测量精度不高。精度高温度测量通常采取接触式测量方式，例如膨胀式、热电阻、<strong>热电偶</strong>和PN结集成温度传感器，其中热电阻具有反应快、测温范围广、精度高的特点并得到广泛应用。<br>　　常用热电阻测温电路有利用串联精度高电阻分压的方式，经过运算放大和跟随后采集,这种方法结构简单、成本低,但是测量误差较大;电桥法测电阻精度高，但是结构复杂,需要大量计算;三线制恒流源法利用外部恒流源驱动热电阻, 经过运放调理电路后进行采集，这种方法结构简单，测量精度高，但是无法避免热电阻导线内阻和恒流源波动产生的影响;文献采样芯片使用外部参考电压，可以消除电源波动影响，降低热电阻导线内阻影响，但是当导线内阻阻值不同时，无法完全消除内阻影响。基于专用芯片采用四线制热电阻进行温度测量，在消除恒流源波动影响的同时，可以完全消除热电阻内阻带来的测量误差，进一步提高测量精度。<br>　　所采用方案的具体测温原理如下:通过AD7793专用热电阻采集芯片内部恒流源驱动热电阻形成电压信号，利用差分通道采集该信号，并通过高速通信传输到处理器，处理器将电压信号转换成电阻值。通常热电阻经过分度表建立阻值与温度的关系，热电阻具有不连续性，提出了线性拟合的方案，该方案拟合出的温度曲线低温段较为准确，随温度升高误差会逐渐增加，为获得准确的阻值温度转换结果，采用二分查表法，并利用插值算法获得精度高温度测量。对于精度较高的热电阻，二分法比较次数较多，因此首先采用线性法快速定位，在此基础上使用二分法以减少运算量。在实际应用中，采样通道通常含有大量噪声，需要在温度转换之前对AD芯片采样回来的电压信号进行数字滤波,根据噪声的特点，采用均方根值数字滤波算法，仿真和实验验证了的有效性。<br>电桥法<br>　　三线式Pt1000不平衡电桥如图1, R1&#x2F;R2&#x2F;R3为固定电阻，r1&#x2F;r2&#x2F;r3为热电阻导线内阻，Rt为热电阻，Vr为导线内阻电压，V为电桥电源，V0为理想状态下电桥电压，V0r为内阻存在时桥电压。<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U016225.png" alt="img"><br>　　假设系统为理想状态，内阻r1&#x3D;r2&#x3D;r3&#x3D;O,电阻不存在容差时，此时相对误差<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U03E64.png" alt="img"><br>　　上式表明，由于R1-R2与Rt-R3可能为正也可能为负，因此相对误差也存在正负可能，其中引线内阻也会影响最终的测量值。惠斯通电桥法测电阻量程大，但是算法复杂，计算过程中需要做近似处理，会导致测量精度降低。.<br>恒流源法<br>　　恒流源法测电阻原理是利用一个恒流源通过热电阻，通过测:量热电阻两侧的电压，利用欧姆定律计算出对应的热电阻阻值。三线制铂电阻接线如图2所示，其中I为流过热电阻的电流源，RL1、RL2、RL3分别为三根导线内阻，Rt为热电阻阻值，V为热电阻测得的电压。<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U04B16.png" alt="img"><br>　　由上述表达式可知，所测得的电压中存在导线内阻的系统误差，恒流源电流越大，误差也就越大，无法消除。文献提出热电阻引线电阻消除方法，利用热敏电阻测量专用芯片AD7792配合具体电路以消除引线电阻影响，电路设计如图3所示。<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U055532.png" alt="img"><br>　　第一通道采样电压Ui1&#x3D; (R+r)×I，第二通道采样电压Ui2&#x3D;(R+2r)×I，同时启动采样芯片的两个通道进行采样，将采样得到的数据进行如下公式计算:<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U105K2.png" alt="img"><br>　　由上述计算公式可以将热电阻引线内阻消除，计算结果与热电阻阻值为线性关系。利用此方案测电阻时需要使用两个通道进行电压采样，而且两通道必须同时采样，否则可能会由于电流源波动而导致电压变化，测量结果会引入因电压波动产生的误差。另一点，将两通道采样电压进行减运算消除导线内阻影响的设计方案中，将两根导线内阻做了近似相等处理，这就要求两根导线必须长度、材质等参数必须完全相同，实际应用过程中很难做到两根导线内阻完全相等，此方法可以很大程度降低热电阻导线内阻影响，但无法做到完全消除。<br>硬件电路设计<br>四线制采样电路<br>　　AD7793芯片内置低噪声、带有三个差分模拟输入的24位Σ-△ADC型ADC,内部集成了10μA、210μA及1mA激励电流源和仪表放大器，可以将源阻抗直接置于前端，均方根(RMS) 噪声最低为40nV。<br>芯片自带基准源，同时支持外部基准电压，设计采用外部基准电压，可以消除由于恒流源波动导致参考电压变化带入的误差。采样电路设计如图4所示。<br>图4中I是由AD7793芯片内部输出的恒流源，大小为1mA， RL1、RL2、RL3、RL4是Pt1000导线内阻，Rt为Pt1000电阻，Re为电阻阻值。AD7793采用双极性模式，则Pt1000测量结果为:<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U114458.png" alt="img"><br>　　上式中，Code 为AD读取的采样值，N为AD芯片位数,AIN为待测热电阻电压值，GAIN 为芯片增益值，Vref是 外部基准电压，即Re电阻的电压值。AD采样芯片外部参考电压为4. 5V，热电阻两侧待测电压最大值为4.21V，即增益值GAIN设置为1。由Rt的表达式可以得出，电流源波动误差通过使用外部基准电压设计，可以完全消除，同时也完全消除热电阻导线内阻影响，热电阻阻值测量误差最终只与电阻Re的精度和AD7793芯片性能有关。<br>电阻选型与设计<br>　　AD7793采样到的信号需要送入FPGA中进行滤波处理，因此它的输出更新速度不能过慢，AD793 的输出更新速率与分辨率位数是反比关系，需要兼顾更新速率与分辨率位数，取更新速率为33. 2Hz，此时分辨率位数为21位。<br>　　芯片恒流源值分为三个:10μA、210μA， 1mA。假设想要温度测量精度达到0.01℃，电阻分辨率需要达到0.0391Ω，即使用210μA恒流源电压测量分辨精度达到0. 00821mV，使用1mA恒流源式电压分辨率达到0.0391mV。由于芯片分辨率位21位，芯片满量程电压为5V，电压最小分辨率为: .<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U123P7.png" alt="img"><br>　　此时电压最小分辨率均满足要求，而使用1mA恒流源电压最小分辨率是使用210μA恒流源的4.761音，使用1mA恒流源测量精度会更高，且抗干扰能力较强同时可以避免铂电阻因流过本身电流而产生的热效应。<strong>Pt1000热电阻</strong>在0℃<del>300℃是电阻变化范围为1000Ω ~2120. 515Ω变化，其电压变化范围则为1V</del>2. 120515V变化，使用两个热电阻串联，电压范围则可达到2V<del>4.2103V。串联热电阻不仅扩大了测量电压范围，省去外围运放电路，简化电路.结构，减小因运放自身产生的误差，同时最小电阻分辨率由0.0391Ω扩大到0.0782Ω，提高温度测量精度并提高靠干扰能力。<br>　　由Rt最终计算公式可知，通过降低Re本身误差可以保证系统测量精度。Rt 热电阻电压变化范围为2V</del>4. 2103V,则AD芯片参考电压设计为4.5V时满足系统测量要求，即电阻Re的值确定为4.5kΩ。将9个容差为0.01%，温溧为0.2ppm&#x2F;℃的5000电阻串联，可以有效地降低R。误差，如图5所示。<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U132644.png" alt="img"><br>软件算法设计<br>均方值滤波算法<br>　　<strong>热电阻</strong>两侧接入示波器，将采样到的数据做快速傅里叶变换，可以看出热电阻噪声主要来源于高斯白噪声。在物理学中常用均方根值(RMS) 来分析噪声，反映物理量的有效值，与常规平均滤波法相比均方根滤波具有更好的数据稳定性，是一个标准的数值稳定性优化算法，能够有效地滤除电路中的白噪声。<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U141Z3.png" alt="img"><br>　　即信号平方的均值再开方，滤波前后波形仿真对比如图6所示，可以看出，滤波后的波形较为平稳，滤波效果良好。<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U150401.png" alt="img"><br>温度转换方法<br>　　热电阻通过分度表建立阻值与温度的关系，拟合曲线法利用该分度表进行连续的曲线拟合，温度转换的运算量较小，但在高温度区域的精度下降较为明显。因此，考虑采用二分查找加插值补偿的方法在全温度范围内获取较高的计算精度。由于精度较高的热电阻数据量较大，采用二分查表法比，较次数较多，因此首先采用线性法快速定位，之后使用二分查表与插值运算法以减少运算量。<br>线性定位<br>　　由于热电阻阻值随温度呈现近似一-次线性变化，因此在定位时可以采用一.次函数以简化运算量。一次函数的斜率和截距通过最大误差法决定，即首先计算每个温度点的阻值误差，并提取其最大值，在不同的斜率和截距下进行误差最大值的比较，并选取误差最大值最小的一组斜率和截距参与线性定位。以Pt1000热电阻为例，其线性定位的一次函数表达式如下:<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U200942.png" alt="img"><br>二分查找<br>　　二分查找也叫折半查找，相较于普通查表，效率更为高效，它要求处理器带有存储结构，用于存放查找表，二分查找要求数组采用顺序存储结构，表中元素有序排列。对于精度高的热电阻分度表，数据量较大，若直接采用二分查找则运算量也较大，因此，在线性定位的基础上对最大误差留有适当裕量以缩小二分查找的范围，降低运算量。对于Pt1000热电阻，最大误差留有适当裕量后取±4℃;传统二分法区间包含3000个数据，需循环11~12次，而线性定位缩小范围后，仅包含80个数据，需循环6~7次，因此,可有效减少循环次数，降低运算量。<br>插值算法<br>　　线性插值算法是利用已知数据去预测未知数据的数据处理方法，以距离为权重的一-种插值算法，根据插值点左右临近的两个数据进行线性估算，插值点数值大小取决于距离到临近两点的距离。<br>Rt为测量热电阻阻值，Rt0. Rt1为Rt在查找表内相邻的两个热电阻阻值，t0、 t1为查找表中Rt0. Rt1对应的温度:<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U210V6.png" alt="img"><br>　　利用测得的热电阻阻值Rt与查找表中相邻阻值Rto、Rt1的距离作为权重，相邻阻值对应的温度t0、t1 作为加权，计算出最终测量温度值。<br>实验结果分析.<br>　　为了验证测量精度是否改善，将Pt1000热电阻放置恒温箱中一段时间，待温度稳定后，将测量温度与恒温箱设定温度进行对比。测量不同温度，测量结果如表1。表中tset为恒温箱设定温度，t为测得的温度，△t为误差值。<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U21c49.png" alt="img"><br>　　由测量的结果可以看出绝对误差控制在0.01℃内，设计达到预期设计目标，改善了热电阻测温精度不高，范围窄等问题。<br><img src="/2024/02/20/%E4%B8%80%E7%A7%8D%E7%B2%BE%E5%BA%A6%E9%AB%98%E7%83%AD%E7%94%B5%E9%98%BB%E6%B5%8B%E6%B8%A9%E7%94%B5%E8%B7%AF%E5%8F%8A%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/1-2304250U55C15.png" alt="img"><br>结语<br>　　通过对电阻测量方案的分析，确定了采样电路设计思路，利用外部电压参考源及两个四线制热电阻串联，它不仅能够提高测温精度，还能够省去运放及跟随电路，大大简化了电路设计。软件.上，通过二分查表线性插值算法以及数字滤波，避免了由线性拟合带入的系统误差。经实测，该测温误差不高于0.01℃，能够满足设计要求。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2024/02/20/hello-world/"/>
    <url>/2024/02/20/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
